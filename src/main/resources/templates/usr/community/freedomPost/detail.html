<html layout:decorate="~{usr/layout/layout.html}">

<head>
    <title></title>
</head>

<body>

<main layout:fragment="main">
    <div class="flex flex-col align-center mx-auto w-4/6">
        <span class="text-3xl font-bold" th:text="${freedomPost.title}"></span>
        <span class="text-xl font-bold" th:text="${freedomPost.category}"></span>
        <div class="w-full max-w-ls" th:text="${freedomPost.content}"></div>
        <button class="btn btn-block btn-primary gap-1" onclick="if(confirm('정말로 삭제하시겠습니까?')) $(this).next().submit();">삭제</button>
        <form hidden th:action="@{|/community/freedomPost/${freedomPost.id}|}" method="POST">
            <input type="hidden" name="_method" value="delete">
        </form>
        <button class="btn btn-block btn-primary gap-1" th:onclick="|location.href='@{/community/freedomPost/modify/} + ${freedomPost.id}'|">수정</button>

        <span class="text-xl font-bold">댓글 쓰기</span>
        <!-- 댓글 작성 -->
        <form th:action="@{|/comment/create/${freedomPost.id}|}" th:object="${commentForm}" method="post">
            <textarea class="textarea textarea-primary w-full max-w-ls form-control" placeholder="content" th:field="*{content}" rows="4"></textarea>
            <input type="submit" class="btn btn-primary" value="댓글 등록">
        </form>

        <!-- 댓글의 갯수 표시 -->
        <h5 th:text="|${#lists.size(freedomPost.commentList)}개의 댓글이 있습니다.|"></h5>
        <div class="card w-full bg-base-100 shadow-xl my-2" th:each="comment : ${freedomPost.commentList}">
            <div class="card-body">
                <p th:text="${comment.content}"></p>
                <div class="card-actions justify-end">
                    <a class="btn btn-sm btn-outline"
                       href="javascript:void(0);"
                       onclick="if ( confirm('정말로 삭제하시겠습니까?') ) $(this).next().submit();">
                        삭제</a>
                    <form hidden th:action="@{|/comment/${comment.id}|}" method="POST">
                        <input type="hidden" name="_method" value="delete">
                    </form>
                </div>
            </div>
        </div>
    </div>

</main>
</body>

</html>

